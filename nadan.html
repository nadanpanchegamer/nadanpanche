<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Ayat Wholesale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #22c55e;
            --primary-hover: #16a34a;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            transition: background-color: 0.3s;
        }
        .btn-primary:hover {
            background-color: var(--primary-hover);
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modal-content {
            max-height: 90vh;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="flex h-screen bg-gray-200">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-800 text-white flex flex-col">
            <div class="px-8 py-6 text-2xl font-bold border-b border-gray-700">
                Ayat Admin
            </div>
            <nav class="flex-1 px-4 py-4 space-y-2">
                <a href="#" data-page="dashboard-page" class="flex items-center px-4 py-2 rounded-md bg-gray-700">
                    <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
                </a>
                <a href="#" data-page="products-page" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-box-open mr-3"></i> Products
                </a>
                <a href="#" data-page="orders-page" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-receipt mr-3"></i> Orders
                </a>
            </nav>
            <div class="px-4 py-4 border-t border-gray-700">
                <h4 class="px-4 text-sm font-semibold text-gray-400 mb-2">Database</h4>
                 <button id="export-db-btn" class="w-full flex items-center px-4 py-2 rounded-md hover:bg-gray-700 text-left">
                    <i class="fas fa-file-export mr-3"></i> Export Data
                </button>
                 <button id="import-db-btn" class="w-full flex items-center px-4 py-2 rounded-md hover:bg-gray-700 text-left">
                    <i class="fas fa-file-import mr-3"></i> Import Data
                </button>
                <input type="file" id="import-file-input" class="hidden" accept=".json">
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <header class="bg-white shadow-md p-4">
                <h1 id="page-title" class="text-2xl font-bold text-gray-800">Dashboard</h1>
            </header>

            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                
                <!-- Dashboard Page -->
                <section id="dashboard-page">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-dollar-sign text-4xl text-green-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Revenue</p>
                                <p id="total-revenue" class="text-2xl font-bold">Rs. 0</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-receipt text-4xl text-blue-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Orders</p>
                                <p id="total-orders" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-box-open text-4xl text-yellow-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Products</p>
                                <p id="total-products" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                         <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-users text-4xl text-purple-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Customers (from orders)</p>
                                <p id="total-customers" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Orders & Low Stock -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Recent Orders</h2>
                            <div id="recent-orders-table" class="overflow-x-auto">
                                <!-- Recent orders table will be injected here -->
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Low Stock Items</h2>
                            <div id="low-stock-table" class="overflow-x-auto">
                                <!-- Low stock table will be injected here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Page -->
                <section id="products-page" class="hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Manage Products</h2>
                            <button id="add-product-btn" class="btn-primary px-4 py-2 rounded-md flex items-center">
                                <i class="fas fa-plus mr-2"></i> Add Product
                            </button>
                        </div>
                        <div id="products-table-container" class="overflow-x-auto">
                           <!-- Products table will be injected here -->
                        </div>
                    </div>
                </section>
                
                <!-- Orders Page -->
                <section id="orders-page" class="hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-xl font-semibold mb-4">Manage Orders</h2>
                        <div id="orders-table-container" class="overflow-x-auto">
                           <!-- Orders table will be injected here -->
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>
    
    <!-- Product Modal -->
    <div id="product-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-overlay">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl modal-content overflow-y-auto">
            <div class="p-6 border-b">
                <h2 id="modal-title" class="text-2xl font-bold">Add New Product</h2>
            </div>
            <form id="product-form" class="p-6 space-y-4">
                <input type="hidden" id="product-id">
                <div>
                    <label for="name_en" class="block mb-1 font-medium">Product Name (English)</label>
                    <input type="text" id="name_en" required class="w-full p-2 border rounded">
                </div>
                <div>
                    <label for="name_ur" class="block mb-1 font-medium">Product Name (Urdu)</label>
                    <input type="text" id="name_ur" dir="rtl" required class="w-full p-2 border rounded">
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="price" class="block mb-1 font-medium">Price (Rs.)</label>
                        <input type="number" id="price" required class="w-full p-2 border rounded" min="0">
                    </div>
                     <div>
                        <label for="stock" class="block mb-1 font-medium">Stock Quantity</label>
                        <input type="number" id="stock" required class="w-full p-2 border rounded" min="0">
                    </div>
                    <div>
                        <label for="category" class="block mb-1 font-medium">Category</label>
                        <select id="category" required class="w-full p-2 border rounded bg-white">
                            <!-- Categories will be loaded here -->
                        </select>
                    </div>
                </div>
                <div>
                    <label for="image" class="block mb-1 font-medium">Image URL</label>
                    <input type="text" id="image" placeholder="https://placehold.co/..." required class="w-full p-2 border rounded">
                </div>
                <div>
                    <label for="description_en" class="block mb-1 font-medium">Description (English)</label>
                    <textarea id="description_en" rows="2" class="w-full p-2 border rounded"></textarea>
                </div>
                <div>
                    <label for="description_ur" class="block mb-1 font-medium">Description (Urdu)</label>
                    <textarea id="description_ur" rows="2" dir="rtl" class="w-full p-2 border rounded"></textarea>
                </div>
                 <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="top_selling" class="form-checkbox h-5 w-5 text-green-600">
                        <span>Mark as Top Selling Product</span>
                    </label>
                </div>
            </form>
            <div class="p-6 bg-gray-50 border-t flex justify-end space-x-4">
                <button id="cancel-btn" type="button" class="px-6 py-2 bg-gray-200 rounded-md">Cancel</button>
                <button id="save-product-btn" type="submit" form="product-form" class="btn-primary px-6 py-2 rounded-md">Save Product</button>
            </div>
        </div>
    </div>
    
    <!-- Embedded Mock Database Script -->
    <script>
        // --- MOCK DATABASE ---
        function loadData(key, defaultValue) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        }
        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }
        const defaultCategories = [
            { id: 'snacks', name_en: 'Snacks & Chips', name_ur: 'نمکین اور چپس', icon: 'fa-cookie-bite' },
            { id: 'biscuits', name_en: 'Biscuits', name_ur: 'بسکٹ', icon: 'fa-cookie' },
            { id: 'bakery', name_en: 'Bakery & Cakes', name_ur: 'بیکری اور کیک', icon: 'fa-bread-slice' },
            { id: 'peek-freans', name_en: 'Peek Freans', name_ur: 'پیک فریز', icon: 'fa-cookie-bite' },
            { id: 'meat-fish', name_en: 'Meat & Fish', name_ur: 'گوشت اور مچھلی', icon: 'fa-fish' }
        ];
        const defaultProducts = [
            { id: 1, category: 'biscuits', name_en: 'BISCONI COFFEE RICH CAKES', name_ur: 'بسکونی کافی رچ کیک', price: 0, image: 'https://placehold.co/300x300/f3e8ff/a855f7?text=Coffee+Cake', description_en: 'Coffee-flavored rich cakes.', description_ur: 'کافی کے ذائقے والے رچ کیکس۔', stock: 50, top_selling: false },
            { id: 2, category: 'biscuits', name_en: 'BISCONI FLO CHOCOLATE RS 10', name_ur: 'بسکونی فلو چاکلیٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/fecdd3/f43f5e?text=Choco+Flo', description_en: 'Chocolate-flavored biscuits.', description_ur: 'چاکلیٹ کے ذائقے والے بسکٹ۔', stock: 150, top_selling: true },
            { id: 3, category: 'biscuits', name_en: 'BISCONNI HAVE A NICE DAY RS 10', name_ur: 'بسکونی ہیو اے نائس ڈے 10 روپے', price: 10, image: 'https://placehold.co/300x300/d1d5db/374151?text=Nice+Day', description_en: 'Biscuits to have a nice day.', description_ur: 'ایک اچھے دن کے لیے بسکٹ۔', stock: 120, top_selling: false },
            { id: 4, category: 'biscuits', name_en: 'BISCONNI BUTTER COAKIES RS 70', name_ur: 'بسکونی بٹر کوکیز 70 روپے', price: 70, image: 'https://placehold.co/300x300/fde047/b45309?text=Butter+Cookies', description_en: 'Rich butter cookies.', description_ur: 'رچ بٹر کوکیز۔', stock: 80, top_selling: true },
            { id: 5, category: 'biscuits', name_en: 'BISCONNI CHAI WALA BISCUTE RS 10', name_ur: 'بسکونی چائے والا بسکٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/d6d3d1/78716c?text=Chai+Biscuit', description_en: 'Biscuits perfect for tea.', description_ur: 'چائے کے لیے بہترین بسکٹ۔', stock: 200, top_selling: true },
            { id: 6, category: 'biscuits', name_en: 'BISCONNI CHIP HOP RS 30', name_ur: 'بسکونی چپ ہاپ 30 روپے', price: 30, image: 'https://placehold.co/300x300/e5e5e5/171717?text=Chip+Hop', description_en: 'Chocolate chip cookies.', description_ur: 'چاکلیٹ چپ کوکیز۔', stock: 90, top_selling: false },
            { id: 7, category: 'biscuits', name_en: 'BISCONNI CHOCOLATE CHIP LOADED RS 20', name_ur: 'بسکونی چاکلیٹ چپ لوڈڈ 20 روپے', price: 20, image: 'https://placehold.co/300x300/525252/d4d4d4?text=Loaded+Chip', description_en: 'Cookies loaded with chocolate chips.', description_ur: 'چاکلیٹ چپس سے بھرے کوکیز۔', stock: 75, top_selling: true },
            { id: 8, category: 'biscuits', name_en: 'BISCONNI CHOCOLATE CHIP RS 10', name_ur: 'بسکونی چاکلیٹ چپ 10 روپے', price: 10, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Choco+Chip', description_en: 'Classic chocolate chip cookies.', description_ur: 'کلاسک چاکلیٹ چپ کوکیز۔', stock: 160, top_selling: false },
            { id: 9, category: 'biscuits', name_en: 'BISCONNI CHOCOLATE CHIP RS 20 16 pca', name_ur: 'بسکونی چاکلیٹ چپ 20 روپے 16 پیک', price: 20, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Choco+Chip', description_en: '16 pieces of chocolate chip cookies.', description_ur: 'چاکلیٹ چپ کوکیز کے 16 پیس۔', stock: 65, top_selling: false },
            { id: 10, category: 'biscuits', name_en: 'BISCONNI CHOCOLATE CHIP RS 30', name_ur: 'بسکونی چاکلیٹ چپ 30 روپے', price: 30, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Choco+Chip', description_en: 'Larger pack of chocolate chip cookies.', description_ur: 'چاکلیٹ چپ کوکیز کا بڑا پیک۔', stock: 100, top_selling: true },
            { id: 11, category: 'biscuits', name_en: 'BISCONNI CHOCOLATOTO RS 10', name_ur: 'بسکونی چاکولاتو 10 روپے', price: 10, image: 'https://placehold.co/300x300/a8a29e/292524?text=Chocolatoto', description_en: 'Chocolate-flavored wafer biscuits.', description_ur: 'چاکلیٹ کے ذائقے والے ویفر بسکٹ۔', stock: 140, top_selling: false },
            { id: 12, category: 'biscuits', name_en: 'BISCONNI COCOMO CHOCOLATE RS 10', name_ur: 'بسکونی کوکومو چاکلیٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/a8a29e/292524?text=Cocomo', description_en: 'Chocolate-filled cookies.', description_ur: 'چاکلیٹ سے بھرے کوکیز۔', stock: 180, top_selling: true },
            { id: 13, category: 'biscuits', name_en: 'BISCONNI COCOMO RS 100', name_ur: 'بسکونی کوکومو 100 روپے', price: 100, image: 'https://placehold.co/300x300/a8a29e/292524?text=Cocomo', description_en: 'Large pack of Cocomo cookies.', description_ur: 'کوکومو کوکیز کا بڑا پیک۔', stock: 40, top_selling: false },
            { id: 14, category: 'biscuits', name_en: 'BISCONNI CRUX RS 10', name_ur: 'بسکونی کرکس 10 روپے', price: 10, image: 'https://placehold.co/300x300/fde047/b45309?text=Crux', description_en: 'Crispy biscuits.', description_ur: 'کرسپی بسکٹ۔', stock: 110, top_selling: false },
            { id: 15, category: 'biscuits', name_en: 'BISCONNI DIGESTUVE ? sugar free', name_ur: 'بسکونی ڈائجسٹو (شوگر فری)', price: 0, image: 'https://placehold.co/300x300/d6d3d1/78716c?text=Digestive', description_en: 'Sugar-free digestive biscuits.', description_ur: 'شوگر فری ڈائجسٹو بسکٹ۔', stock: 35, top_selling: false },
            { id: 16, category: 'biscuits', name_en: 'BISCONNI DIVINE RS 30', name_ur: 'بسکونی ڈیوائن 30 روپے', price: 30, image: 'https://placehold.co/300x300/6ee7b7/065f46?text=Divine', description_en: 'Divine flavored biscuits.', description_ur: 'ڈیوائن ذائقے والے بسکٹ۔', stock: 60, top_selling: false },
            { id: 17, category: 'biscuits', name_en: 'BISCONNI FLARE RS 40', name_ur: 'بسکونی فلیئر 40 روپے', price: 40, image: 'https://placehold.co/300x300/fca5a5/b91c1c?text=Flare', description_en: 'Spicy flavored crackers.', description_ur: 'مسالہ دار فلیور والے کریکرز۔', stock: 45, top_selling: false },
            { id: 18, category: 'bakery', name_en: 'BISCONNI FUDGE BROWINE RS 40', name_ur: 'بسکونی فج براؤنی 40 روپے', price: 40, image: 'https://placehold.co/300x300/d1d5db/4b5563?text=Fudge+Brownie', description_en: 'Rich fudge brownie.', description_ur: 'رچ فج براؤنی۔', stock: 25, top_selling: false },
            { id: 19, category: 'bakery', name_en: 'BISCONNI LOTUS CAKE RS 40', name_ur: 'بسکونی لوٹس کیک 40 روپے', price: 40, image: 'https://placehold.co/300x300/e0f2fe/0ea5e9?text=Lotus+Cake', description_en: 'Lotus flavored cake.', description_ur: 'لوٹس کے ذائقے والا کیک۔', stock: 30, top_selling: false },
            { id: 20, category: 'biscuits', name_en: 'BISCONNI MI AMOR RS 40', name_ur: 'بسکونی می امور 40 روپے', price: 40, image: 'https://placehold.co/300x300/fbcfe8/be185d?text=Mi+Amor', description_en: 'Sweet heart-shaped biscuits.', description_ur: 'میٹھے دل کی شکل والے بسکٹ۔', stock: 55, top_selling: false },
            { id: 21, category: 'biscuits', name_en: 'BISCONNI NOVITA CHOCOLATE RS 10', name_ur: 'بسکونی نویٹا چاکلیٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/d4d4d4/525252?text=Novita+Choco', description_en: 'Chocolate cream-filled biscuits.', description_ur: 'چاکلیٹ کریم سے بھرے بسکٹ۔', stock: 170, top_selling: true },
            { id: 22, category: 'biscuits', name_en: 'BISCONNI NOVITA ORANGE RS 10', name_ur: 'بسکونی نویٹا اورنج 10 روپے', price: 10, image: 'https://placehold.co/300x300/fed7aa/ea580c?text=Novita+Orange', description_en: 'Orange cream-filled biscuits.', description_ur: 'اورنج کریم سے بھرے بسکٹ۔', stock: 130, top_selling: false },
            { id: 23, category: 'biscuits', name_en: 'BISCONNI PERFRTTO RS 30', name_ur: 'بسکونی پرفیکٹو 30 روپے', price: 30, image: 'https://placehold.co/300x300/a5f3fc/0891b2?text=Perfetto', description_en: 'Perfectly baked biscuits.', description_ur: 'مکمل طور پر پکے ہوئے بسکٹ۔', stock: 95, top_selling: false },
            { id: 24, category: 'biscuits', name_en: 'BISCONNI PRIME ECLIPSE RS 30', name_ur: 'بسکونی پرائم ایکلپس 30 روپے', price: 30, image: 'https://placehold.co/300x300/c7d2fe/4338ca?text=Eclipse', description_en: 'Creamy filled sandwich biscuits.', description_ur: 'کریمی بھرے ہوئے سینڈوچ بسکٹ۔', stock: 85, top_selling: false },
            { id: 25, category: 'biscuits', name_en: 'BISCONNI RITE RS 10', name_ur: 'بسکونی رائٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/fca5a5/b91c1c?text=Rite', description_en: 'Simple and delicious biscuits.', description_ur: 'سادہ اور مزیدار بسکٹ۔', stock: 210, top_selling: true },
            { id: 26, category: 'biscuits', name_en: 'BISCONNI TEA MATE RS 20', name_ur: 'بسکونی ٹی میٹ 20 روپے', price: 20, image: 'https://placehold.co/300x300/f3e8ff/a855f7?text=Tea+Mate', description_en: 'Biscuits to enjoy with tea.', description_ur: 'چائے کے ساتھ لطف اندوز ہونے کے لیے بسکٹ۔', stock: 135, top_selling: false },
            { id: 27, category: 'biscuits', name_en: 'BISCONNI TREAT RS 10', name_ur: 'بسکونی ٹریٹ 10 روپے', price: 10, image: 'https://placehold.co/300x300/bbf7d0/16a34a?text=Treat', description_en: 'A sweet treat biscuit.', description_ur: 'ایک میٹھا ٹریٹ بسکٹ۔', stock: 190, top_selling: false },
            { id: 28, category: 'bakery', name_en: 'BISCONNI ROLLIES CAKES', name_ur: 'بسکونی رولیز کیکس', price: 0, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Rollies+Cakes', description_en: 'Swiss roll style cakes.', description_ur: 'سوئس رول اسٹائل کے کیکس۔', stock: 40, top_selling: false },
            { id: 29, category: 'bakery', name_en: 'BISCONNI ZABER RUSK CAKE RUSK', name_ur: 'بسکونی زابر رسک کیک رسک', price: 0, image: 'https://placehold.co/300x300/ffedd5/9a3412?text=Rusk+Cake', description_en: 'Crispy cake rusk.', description_ur: 'کرسپی کیک رسک۔', stock: 60, top_selling: false },
            { id: 30, category: 'bakery', name_en: 'BISONNI CHIP CAKE RS 50', name_ur: 'بسکونی چپ کیک 50 روپے', price: 50, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Chip+Cake', description_en: 'Cake with chocolate chips.', description_ur: 'چاکلیٹ چپس والا کیک۔', stock: 35, top_selling: false },
            { id: 41, category: 'peek-freans', name_en: 'Peek Freans Sooper', name_ur: 'پیک فریز سوپر', price: 10, image: 'https://placehold.co/300x300/ffedd5/9a3412?text=Sooper', description_en: 'Pakistan\'s No. 1 selling biscuit, an original egg & milk cookie.', description_ur: 'پاکستان کا نمبر 1 سب سے زیادہ فروخت ہونے والا بسکٹ، اصل انڈے اور دودھ کی کوکی۔', stock: 300, top_selling: true },
            { id: 42, category: 'peek-freans', name_en: 'Peek Freans Sooper Elaichi', name_ur: 'پیک فریز سوپر الائچی', price: 10, image: 'https://placehold.co/300x300/ffedd5/9a3412?text=Sooper+Elaichi', description_en: 'An egg & milk cookie with the added flavor of cardamom.', description_ur: 'الائچی کے ذائقے والا انڈے اور دودھ کا بسکٹ۔', stock: 250, top_selling: false },
            { id: 43, category: 'peek-freans', name_en: 'Peek Freans Gluco', name_ur: 'پیک فریز گلوکو', price: 10, image: 'https://placehold.co/300x300/d6d3d1/78716c?text=Gluco', description_en: 'A classic biscuit with the goodness of milk and wheat.', description_ur: 'دودھ اور گندم کی بھلائی کے ساتھ ایک کلاسک بسکٹ۔', stock: 280, top_selling: true },
            { id: 44, category: 'peek-freans', name_en: 'Peek Freans Peanut Pik', name_ur: 'پیک فریز پینٹ پک', price: 10, image: 'https://placehold.co/300x300/d9f991/4d7c0f?text=Peanut+Pik', description_en: 'Biscuits with a delightful peanut flavor.', description_ur: 'مونگ پھلی کے مزیدار ذائقے والے بسکٹ۔', stock: 200, top_selling: false },
            { id: 45, category: 'peek-freans', name_en: 'Peek Freans Rio (Chocolate)', name_ur: 'پیک فریز ریو (چاکلیٹ)', price: 10, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Rio+Choco', description_en: 'Chocolate cream-filled sandwich cookies.', description_ur: 'چاکلیٹ کریم سے بھرے سینڈوچ کوکیز۔', stock: 190, top_selling: true },
            { id: 46, category: 'peek-freans', name_en: 'Peek Freans Rio (Strawberry)', name_ur: 'پیک فریز ریو (اسٹرابیری)', price: 10, image: 'https://placehold.co/300x300/fbcfe8/be185d?text=Rio+Straw', description_en: 'Strawberry cream-filled sandwich cookies.', description_ur: 'اسٹرابیری کریم سے بھرے سینڈوچ کوکیز۔', stock: 180, top_selling: false },
            { id: 47, category: 'peek-freans', name_en: 'Peek Freans Chocolate Sandwich', name_ur: 'پیک فریز چاکلیٹ سینڈوچ', price: 10, image: 'https://placehold.co/300x300/d4d4d4/525252?text=Choco+Sandwich', description_en: 'A rich chocolate sandwich biscuit.', description_ur: 'ایک رچ چاکلیٹ سینڈوچ بسکٹ۔', stock: 150, top_selling: false },
            { id: 48, category: 'peek-freans', name_en: 'Peek Freans Lemon Sandwich', name_ur: 'پیک فریز لیمن سینڈوچ', price: 10, image: 'https://placehold.co/300x300/fef08a/ca8a04?text=Lemon+Sandwich', description_en: 'A zesty lemon-flavored sandwich biscuit.', description_ur: 'لیموں کے ذائقے والا سینڈوچ بسکٹ۔', stock: 140, top_selling: false },
            { id: 49, category: 'peek-freans', name_en: 'Peek Freans Marie', name_ur: 'پیک فریز میری', price: 10, image: 'https://placehold.co/300x300/c7d2fe/4338ca?text=Marie', description_en: 'Light and crispy Marie biscuits.', description_ur: 'ہلکے اور کرسپی میری بسکٹ۔', stock: 220, top_selling: false },
            { id: 50, category: 'peek-freans', name_en: 'Peek Freans Click', name_ur: 'پیک فریز کلک', price: 10, image: 'https://placehold.co/300x300/d1d5db/374151?text=Click', description_en: 'A unique sweet and salty biscuit with a hint of cumin (zeera).', description_ur: 'زیرہ کے اشارے کے ساتھ ایک منفرد میٹھا اور نمکین بسکٹ۔', stock: 170, top_selling: true },
            { id: 51, category: 'peek-freans', name_en: 'Peek Freans Party', name_ur: 'پیک فریز پارٹی', price: 10, image: 'https://placehold.co/300x300/6ee7b7/065f46?text=Party', description_en: 'A light and airy biscuit perfect for any party.', description_ur: 'کسی بھی پارٹی کے لیے ایک ہلکا اور ہوا دار بسکٹ۔', stock: 160, top_selling: false },
            { id: 52, category: 'peek-freans', name_en: 'Peek Freans Saltish', name_ur: 'پیک فریز سالٹش', price: 10, image: 'https://placehold.co/300x300/fca5a5/b91c1c?text=Saltish', description_en: 'Salty crackers perfect for a snack.', description_ur: 'نمکین کریکرز، ناشتے کے لیے بہترین۔', stock: 120, top_selling: false },
            { id: 53, category: 'peek-freans', name_en: 'Peek Freans Farm House (Chocolate Chip)', name_ur: 'پیک فریز فارم ہاؤس (چاکلیٹ چپ)', price: 30, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Farm+House', description_en: 'Classic chocolate chip cookies.', description_ur: 'کلاسک چاکلیٹ چپ کوکیز۔', stock: 90, top_selling: true },
            { id: 54, category: 'peek-freans', name_en: 'Peek Freans Butter Puff', name_ur: 'پیک فریز بٹر پف', price: 20, image: 'https://placehold.co/300x300/fde047/b45309?text=Butter+Puff', description_en: 'Flaky and buttery crackers.', description_ur: 'فلی کی اور مکھن والے کریکرز۔', stock: 110, top_selling: false },
            { id: 55, category: 'peek-freans', name_en: 'Peek Freans Whole Wheat Slice (Sugar Free)', name_ur: 'پیک فریز ہول ویٹ سلائس (شوگر فری)', price: 50, image: 'https://placehold.co/300x300/d6d3d1/78716c?text=Whole+Wheat', description_en: 'A healthy sugar-free whole wheat biscuit.', description_ur: 'ایک صحت مند شوگر فری ہول ویٹ بسکٹ۔', stock: 70, top_selling: false },
            { id: 56, category: 'bakery', name_en: 'Peek Freans Cake Up (Double Chocolate)', name_ur: 'پیک فریز کیک اپ (ڈبل چاکلیٹ)', price: 40, image: 'https://placehold.co/300x300/d4d4d4/525252?text=Cake+Up', description_en: 'A soft cake with a creamy chocolate center.', description_ur: 'ایک نرم کیک جس کے درمیان میں کریمی چاکلیٹ ہوتی ہے۔', stock: 80, top_selling: true },
            { id: 57, category: 'bakery', name_en: 'Peek Freans Cake Up (Strawberry)', name_ur: 'پیک فریز کیک اپ (اسٹرابیری)', price: 40, image: 'https://placehold.co/300x300/fbcfe8/be185d?text=Cake+Up+Straw', description_en: 'A soft cake with a creamy strawberry center.', description_ur: 'ایک نرم کیک جس کے درمیان میں کریمی اسٹرابیری ہوتی ہے۔', stock: 75, top_selling: false },
            { id: 58, category: 'bakery', name_en: 'Peek Freans Smile Donut Cake (Chocolate)', name_ur: 'پیک فریز سمائل ڈونٹ کیک (چاکلیٹ)', price: 30, image: 'https://placehold.co/300x300/d4d4d4/525252?text=Donut+Cake', description_en: 'A chocolate-flavored donut-shaped cake.', description_ur: 'چاکلیٹ کے ذائقے والا ڈونٹ کی شکل کا کیک۔', stock: 65, top_selling: false },
            { id: 59, category: 'bakery', name_en: 'Peek Freans Gluco Teddy Cake', name_ur: 'پیک فریز گلوکو ٹیڈی کیک', price: 40, image: 'https://placehold.co/300x300/d6d3d1/78716c?text=Teddy+Cake', description_en: 'A teddy bear-shaped cake, great for kids.', description_ur: 'ٹیڈی بیئر کی شکل کا کیک، بچوں کے لیے بہترین۔', stock: 95, top_selling: false },
            { id: 60, category: 'bakery', name_en: 'Peek Freans Brownie Cake', name_ur: 'پیک فریز براؤنی کیک', price: 50, image: 'https://placehold.co/300x300/525252/d4d4d4?text=Brownie+Cake', description_en: 'A rich and fudgy brownie cake.', description_ur: 'ایک رچ اور فجی براؤنی کیک۔', stock: 50, top_selling: true },
            { id: 61, category: 'peek-freans', name_en: 'Peek Freans Choco Lava', name_ur: 'پیک فریز چاکو لاوا', price: 40, image: 'https://placehold.co/300x300/fecdd3/f43f5e?text=Choco+Lava', description_en: 'Biscuits with a liquid chocolate lava filling.', description_ur: 'مائع چاکلیٹ لاوا بھرائی والے بسکٹ۔', stock: 80, top_selling: true },
            { id: 62, category: 'peek-freans', name_en: 'Peek Freans Choco Licious', name_ur: 'پیک فریز چاکو لیشئس', price: 20, image: 'https://placehold.co/300x300/fecaca/dc2626?text=Choco+Licious', description_en: 'A chocolate biscuit with chocolate chips.', description_ur: 'چاکلیٹ چپس والا ایک چاکلیٹ بسکٹ۔', stock: 120, top_selling: false },
            { id: 63, category: 'peek-freans', name_en: 'Peek Freans Nankhatai Almond', name_ur: 'پیک فریز نان خطائی بادام', price: 20, image: 'https://placehold.co/300x300/ffedd5/9a3412?text=Nankhatai+Almond', description_en: 'A traditional Nankhatai cookie with almond flavor.', description_ur: 'بادام کے ذائقے والی ایک روایتی نان خطائی کوکی۔', stock: 100, top_selling: false },
            { id: 64, category: 'meat-fish', name_en: 'Chicken (1kg)', name_ur: 'چکن (1 کلو)', price: 750, image: 'https://placehold.co/300x300/fee2e2/ef4444?text=Chicken', description_en: 'Fresh skinless chicken.', description_ur: 'تازہ بغیر جلد کا چکن۔', stock: 30, top_selling: false }
        ];
        ];
        const defaultOrders = [
            { id: `AW-123456`, customer: 'Ahmed Khan', date: '2025-08-29', total: 1100, status: 'Processing' },
            { id: `AW-234567`, customer: 'Fatima Ali', date: '2025-08-28', total: 430, status: 'Shipped' },
            { id: `AW-345678`, customer: 'Zainab Bibi', date: '2025-08-29', total: 750, status: 'Delivered' },
            { id: `AW-456789`, customer: 'Usman Khalid', date: '2025-08-27', total: 180, status: 'Canceled' },
        ];
        if (!localStorage.getItem('ayatWholesaleProducts')) saveData('ayatWholesaleProducts', defaultProducts);
        if (!localStorage.getItem('ayatWholesaleCategories')) saveData('ayatWholesaleCategories', defaultCategories);
        if (!localStorage.getItem('ayatWholesaleOrders')) saveData('ayatWholesaleOrders', defaultOrders);
        function getProducts() { return loadData('ayatWholesaleProducts', []); }
        function getCategories() { return loadData('ayatWholesaleCategories', []); }
        function getOrders() { return loadData('ayatWholesaleOrders', []); }
        function saveProduct(productData) {
            let products = getProducts();
            if (productData.id) {
                const index = products.findIndex(p => p.id === productData.id);
                if (index > -1) products[index] = productData;
            } else {
                productData.id = Date.now();
                products.push(productData);
            }
            saveData('ayatWholesaleProducts', products);
        }
        function deleteProduct(productId) {
            let products = getProducts();
            products = products.filter(p => p.id !== productId);
            saveData('ayatWholesaleProducts', products);
        }
        function saveOrder(orderData) {
            let orders = getOrders();
            const index = orders.findIndex(o => o.id === orderData.id);
            if (index > -1) {
                orders[index] = orderData;
            } else {
                orders.push(orderData);
            }
            saveData('ayatWholesaleOrders', orders);
        }
    </script>
    
    <!-- Main Application Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pages = document.querySelectorAll('main > section');
            const navLinks = document.querySelectorAll('nav a');
            const pageTitle = document.getElementById('page-title');
            const productModal = document.getElementById('product-modal');
            const addProductBtn = document.getElementById('add-product-btn');
            const cancelBtn = document.getElementById('cancel-btn');
            const productForm = document.getElementById('product-form');
            const modalTitle = document.getElementById('modal-title');
            const exportDbBtn = document.getElementById('export-db-btn');
            const importDbBtn = document.getElementById('import-db-btn');
            const importFileInput = document.getElementById('import-file-input');
            const statusColors = {
                'Processing': 'bg-yellow-200 text-yellow-800',
                'Shipped': 'bg-blue-200 text-blue-800',
                'Delivered': 'bg-green-200 text-green-800',
                'Canceled': 'bg-red-200 text-red-800',
            };

            const renderDashboard = () => {
                const products = getProducts();
                const orders = getOrders();
                const totalRevenue = orders.filter(o => o.status === 'Delivered').reduce((sum, o) => sum + o.total, 0);
                document.getElementById('total-revenue').textContent = `Rs. ${totalRevenue.toLocaleString()}`;
                document.getElementById('total-orders').textContent = orders.length;
                document.getElementById('total-products').textContent = products.length;
                document.getElementById('total-customers').textContent = new Set(orders.map(o => o.customer)).size;
                const recentOrders = orders.slice(-5).reverse();
                document.getElementById('recent-orders-table').innerHTML = `<table class="w-full text-left"><thead><tr><th class="p-2">Order ID</th><th class="p-2">Customer</th><th class="p-2">Status</th></tr></thead><tbody>${recentOrders.map(o => `<tr><td class="p-2 border-t">${o.id}</td><td class="p-2 border-t">${o.customer}</td><td class="p-2 border-t"><span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColors[o.status] || ''}">${o.status}</span></td></tr>`).join('')}</tbody></table>`;
                const lowStockProducts = products.filter(p => p.stock < 20);
                document.getElementById('low-stock-table').innerHTML = `<table class="w-full text-left"><thead><tr><th class="p-2">Product</th><th class="p-2">Stock Left</th></tr></thead><tbody>${lowStockProducts.map(p => `<tr><td class="p-2 border-t">${p.name_en}</td><td class="p-2 border-t"><span class="font-bold text-red-600">${p.stock}</span></td></tr>`).join('')}</tbody></table>`;
            };

            const renderProductsPage = () => {
                const products = getProducts();
                const categories = getCategories();
                document.getElementById('products-table-container').innerHTML = `<table class="w-full text-left"><thead><tr class="bg-gray-50"><th class="p-3">Product Name</th><th class="p-3">Category</th><th class="p-3">Price</th><th class="p-3">Stock</th><th class="p-3">Actions</th></tr></thead><tbody class="divide-y">${products.map(p => { const category = categories.find(c => c.id === p.category); return `<tr><td class="p-3">${p.name_en}</td><td class="p-3">${category ? category.name_en : 'N/A'}</td><td class="p-3">Rs. ${p.price}</td><td class="p-3">${p.stock}</td><td class="p-3"><button class="edit-product-btn text-blue-500 hover:text-blue-700 mr-3" data-id="${p.id}"><i class="fas fa-edit"></i></button><button class="delete-product-btn text-red-500 hover:text-red-700" data-id="${p.id}"><i class="fas fa-trash"></i></button></td></tr>`; }).join('')}</tbody></table>`;
            };

            const renderOrdersPage = () => {
                const orders = getOrders();
                document.getElementById('orders-table-container').innerHTML = `<table class="w-full text-left"><thead><tr class="bg-gray-50"><th class="p-3">Order ID</th><th class="p-3">Date</th><th class="p-3">Customer</th><th class="p-3">Total</th><th class="p-3">Status</th><th class="p-3">Actions</th></tr></thead><tbody class="divide-y">${orders.map(o => `<tr><td class="p-3 font-mono text-sm">${o.id}</td><td class="p-3">${o.date}</td><td class="p-3">${o.customer}</td><td class="p-3">Rs. ${o.total}</td><td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColors[o.status] || ''}">${o.status}</span></td><td class="p-3"><select class="status-select bg-white border rounded p-1" data-id="${o.id}">${Object.keys(statusColors).map(status => `<option value="${status}" ${o.status === status ? 'selected' : ''}>${status}</option>`).join('')}</select></td></tr>`).join('')}</tbody></table>`;
            };

            const refreshAllPages = () => {
                const currentPage = Array.from(pages).find(p => !p.classList.contains('hidden'));
                renderDashboard();
                renderProductsPage();
                renderOrdersPage();
                showPage(currentPage ? currentPage.id : 'dashboard-page');
            };

            const showPage = (pageId) => {
                pages.forEach(page => page.classList.add('hidden'));
                document.getElementById(pageId).classList.remove('hidden');
                const title = pageId.split('-')[0];
                pageTitle.textContent = title.charAt(0).toUpperCase() + title.slice(1);
                navLinks.forEach(link => { link.classList.toggle('bg-gray-700', link.dataset.page === pageId); });
                if (pageId === 'dashboard-page') renderDashboard();
                if (pageId === 'products-page') renderProductsPage();
                if (pageId === 'orders-page') renderOrdersPage();
            };
            
            const openModal = (product = null) => {
                productForm.reset();
                const categories = getCategories();
                document.getElementById('category').innerHTML = categories.map(c => `<option value="${c.id}">${c.name_en}</option>`).join('');
                if (product) {
                    modalTitle.textContent = 'Edit Product';
                    document.getElementById('product-id').value = product.id;
                    document.getElementById('name_en').value = product.name_en;
                    document.getElementById('name_ur').value = product.name_ur;
                    document.getElementById('price').value = product.price;
                    document.getElementById('stock').value = product.stock;
                    document.getElementById('category').value = product.category;
                    document.getElementById('image').value = product.image;
                    document.getElementById('description_en').value = product.description_en;
                    document.getElementById('description_ur').value = product.description_ur;
                    document.getElementById('top_selling').checked = product.top_selling;
                } else {
                    modalTitle.textContent = 'Add New Product';
                    document.getElementById('product-id').value = '';
                }
                productModal.classList.remove('hidden');
            };

            const closeModal = () => {
                productModal.classList.add('hidden');
            };

            const exportDatabase = () => {
                const dbData = {
                    products: getProducts(),
                    categories: getCategories(),
                    orders: getOrders()
                };
                const dataStr = JSON.stringify(dbData, null, 2);
                const blob = new Blob([dataStr], {type: "application/json"});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ayat-wholesale-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                alert('Database exported successfully!');
            };
            
            const importDatabase = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.products && data.categories && data.orders) {
                            saveData('ayatWholesaleProducts', data.products);
                            saveData('ayatWholesaleCategories', data.categories);
                            saveData('ayatWholesaleOrders', data.orders);
                            alert('Database imported successfully! The page will now refresh.');
                            refreshAllPages();
                        } else {
                            alert('Invalid database file format.');
                        }
                    } catch (error) {
                        alert('Error reading or parsing the file.');
                        console.error("Import error:", error);
                    }
                };
                reader.readAsText(file);
            };
            
            navLinks.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); showPage(link.dataset.page); }));
            addProductBtn.addEventListener('click', () => openModal());
            cancelBtn.addEventListener('click', closeModal);
            exportDbBtn.addEventListener('click', exportDatabase);
            importDbBtn.addEventListener('click', () => importFileInput.click());
            importFileInput.addEventListener('change', importDatabase);

            productForm.addEventListener('submit', (e) => {
                e.preventDefault();
                saveProduct({
                    id: document.getElementById('product-id').value ? parseInt(document.getElementById('product-id').value) : null,
                    name_en: document.getElementById('name_en').value,
                    name_ur: document.getElementById('name_ur').value,
                    price: parseInt(document.getElementById('price').value),
                    stock: parseInt(document.getElementById('stock').value),
                    category: document.getElementById('category').value,
                    image: document.getElementById('image').value,
                    description_en: document.getElementById('description_en').value,
                    description_ur: document.getElementById('description_ur').value,
                    top_selling: document.getElementById('top_selling').checked,
                });
                closeModal();
                renderProductsPage();
            });
            
            document.body.addEventListener('click', (e) => {
                if(e.target.closest('.edit-product-btn')) {
                    openModal(getProducts().find(p => p.id === parseInt(e.target.closest('.edit-product-btn').dataset.id)));
                }
                if(e.target.closest('.delete-product-btn')) {
                    const productId = parseInt(e.target.closest('.delete-product-btn').dataset.id);
                    if(confirm('Are you sure you want to delete this product?')) {
                        deleteProduct(productId);
                        renderProductsPage();
                    }
                }
            });

            document.body.addEventListener('change', (e) => {
                if (e.target.classList.contains('status-select')) {
                    const orderId = e.target.dataset.id;
                    const newStatus = e.target.value;
                    const orders = getOrders();
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.status = newStatus;
                        saveOrder(order);
                        renderOrdersPage();
                    }
                }
            });

            showPage('dashboard-page');
        });
    </script>
</body>
</html>


