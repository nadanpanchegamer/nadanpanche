<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Ayat Wholesale</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --primary-color: #22c55e;
            --primary-hover: #16a34a;
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            transition: background-color: 0.3s;
        }
        .btn-primary:hover {
            background-color: var(--primary-hover);
        }
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.5);
        }
        .modal-content {
            max-height: 90vh;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="flex h-screen bg-gray-200">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-800 text-white flex flex-col">
            <div class="px-8 py-6 text-2xl font-bold border-b border-gray-700">
                Ayat Admin
            </div>
            <nav class="flex-1 px-4 py-4 space-y-2">
                <a href="#" data-page="dashboard-page" class="flex items-center px-4 py-2 rounded-md bg-gray-700">
                    <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
                </a>
                <a href="#" data-page="products-page" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-box-open mr-3"></i> Products
                </a>
                <a href="#" data-page="orders-page" class="flex items-center px-4 py-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-receipt mr-3"></i> Orders
                </a>
            </nav>
            <div class="px-4 py-4 border-t border-gray-700">
                <h4 class="px-4 text-sm font-semibold text-gray-400 mb-2">Database</h4>
                 <button id="export-db-btn" class="w-full flex items-center px-4 py-2 rounded-md hover:bg-gray-700 text-left">
                    <i class="fas fa-file-export mr-3"></i> Export Data
                </button>
                 <button id="import-db-btn" class="w-full flex items-center px-4 py-2 rounded-md hover:bg-gray-700 text-left">
                    <i class="fas fa-file-import mr-3"></i> Import Data
                </button>
                <input type="file" id="import-file-input" class="hidden" accept=".json">
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <header class="bg-white shadow-md p-4">
                <h1 id="page-title" class="text-2xl font-bold text-gray-800">Dashboard</h1>
            </header>

            <main class="flex-1 overflow-x-hidden overflow-y-auto bg-gray-100 p-6">
                
                <!-- Dashboard Page -->
                <section id="dashboard-page">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-dollar-sign text-4xl text-green-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Revenue</p>
                                <p id="total-revenue" class="text-2xl font-bold">Rs. 0</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-receipt text-4xl text-blue-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Orders</p>
                                <p id="total-orders" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-box-open text-4xl text-yellow-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Total Products</p>
                                <p id="total-products" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                         <div class="bg-white p-6 rounded-lg shadow-md flex items-center">
                            <i class="fas fa-users text-4xl text-purple-500 mr-4"></i>
                            <div>
                                <p class="text-gray-500">Customers (from orders)</p>
                                <p id="total-customers" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Orders & Low Stock -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Recent Orders</h2>
                            <div id="recent-orders-table" class="overflow-x-auto">
                                <!-- Recent orders table will be injected here -->
                            </div>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <h2 class="text-xl font-semibold mb-4">Low Stock Items</h2>
                            <div id="low-stock-table" class="overflow-x-auto">
                                <!-- Low stock table will be injected here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Products Page -->
                <section id="products-page" class="hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-xl font-semibold">Manage Products</h2>
                            <button id="add-product-btn" class="btn-primary px-4 py-2 rounded-md flex items-center">
                                <i class="fas fa-plus mr-2"></i> Add Product
                            </button>
                        </div>
                        <div id="products-table-container" class="overflow-x-auto">
                           <!-- Products table will be injected here -->
                        </div>
                    </div>
                </section>
                
                <!-- Orders Page -->
                <section id="orders-page" class="hidden">
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h2 class="text-xl font-semibold mb-4">Manage Orders</h2>
                        <div id="orders-table-container" class="overflow-x-auto">
                           <!-- Orders table will be injected here -->
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </div>
    
    <!-- Product Modal -->
    <div id="product-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden modal-overlay">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl modal-content overflow-y-auto">
            <div class="p-6 border-b">
                <h2 id="modal-title" class="text-2xl font-bold">Add New Product</h2>
            </div>
            <form id="product-form" class="p-6 space-y-4">
                <input type="hidden" id="product-id">
                <div>
                    <label for="name_en" class="block mb-1 font-medium">Product Name (English)</label>
                    <input type="text" id="name_en" required class="w-full p-2 border rounded">
                </div>
                <div>
                    <label for="name_ur" class="block mb-1 font-medium">Product Name (Urdu)</label>
                    <input type="text" id="name_ur" dir="rtl" required class="w-full p-2 border rounded">
                </div>
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="price" class="block mb-1 font-medium">Price (Rs.)</label>
                        <input type="number" id="price" required class="w-full p-2 border rounded" min="0">
                    </div>
                     <div>
                        <label for="stock" class="block mb-1 font-medium">Stock Quantity</label>
                        <input type="number" id="stock" required class="w-full p-2 border rounded" min="0">
                    </div>
                    <div>
                        <label for="category" class="block mb-1 font-medium">Category</label>
                        <select id="category" required class="w-full p-2 border rounded bg-white">
                            <!-- Categories will be loaded here -->
                        </select>
                    </div>
                </div>
                <div>
                    <label for="image" class="block mb-1 font-medium">Image URL</label>
                    <input type="text" id="image" placeholder="https://placehold.co/..." required class="w-full p-2 border rounded">
                </div>
                <div>
                    <label for="description_en" class="block mb-1 font-medium">Description (English)</label>
                    <textarea id="description_en" rows="2" class="w-full p-2 border rounded"></textarea>
                </div>
                <div>
                    <label for="description_ur" class="block mb-1 font-medium">Description (Urdu)</label>
                    <textarea id="description_ur" rows="2" dir="rtl" class="w-full p-2 border rounded"></textarea>
                </div>
                 <div>
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" id="top_selling" class="form-checkbox h-5 w-5 text-green-600">
                        <span>Mark as Top Selling Product</span>
                    </label>
                </div>
            </form>
            <div class="p-6 bg-gray-50 border-t flex justify-end space-x-4">
                <button id="cancel-btn" type="button" class="px-6 py-2 bg-gray-200 rounded-md">Cancel</button>
                <button id="save-product-btn" type="submit" form="product-form" class="btn-primary px-6 py-2 rounded-md">Save Product</button>
            </div>
        </div>
    </div>
    
    <!-- Embedded Mock Database Script -->
    <script>
        // --- MOCK DATABASE ---
        function loadData(key, defaultValue) {
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : defaultValue;
        }
        function saveData(key, data) {
            localStorage.setItem(key, JSON.stringify(data));
        }
        const defaultCategories = [
            { id: 'fruits-veg', name_en: 'Fruits & Vegetables', name_ur: 'پھل اور سبزیاں', icon: 'fa-carrot' },
            { id: 'dairy-eggs', name_en: 'Dairy & Eggs', name_ur: 'دودھ اور انڈے', icon: 'fa-egg' },
            { id: 'meat-fish', name_en: 'Meat & Fish', name_ur: 'گوشت اور مچھلی', icon: 'fa-fish' },
            { id: 'bakery', name_en: 'Bakery', name_ur: 'بیکری', icon: 'fa-bread-slice' },
            { id: 'beverages', name_en: 'Beverages', name_ur: 'مشروبات', icon: 'fa-wine-bottle' },
            { id: 'snacks', name_en: 'Snacks', name_ur: 'نمکین', icon: 'fa-cookie-bite' },
        ];
        const defaultProducts = [
            { id: 1, category: 'fruits-veg', name_en: 'Apples (1kg)', name_ur: 'سیب (1 کلو)', price: 250, image: 'https://placehold.co/300x300/fecaca/db2777?text=Apple', description_en: 'Fresh, juicy apples.', description_ur: 'تازہ، رسیلے سیب۔', stock: 50, top_selling: true },
            { id: 2, category: 'fruits-veg', name_en: 'Bananas (Dozen)', name_ur: 'کیلے (درجن)', price: 150, image: 'https://placehold.co/300x300/fef08a/ca8a04?text=Banana', description_en: 'Ripe and sweet bananas.', description_ur: 'پکے اور میٹھے کیلے۔', stock: 100, top_selling: false },
            { id: 3, category: 'fruits-veg', name_en: 'Tomatoes (1kg)', name_ur: 'ٹماٹر (1 کلو)', price: 120, image: 'https://placehold.co/300x300/fca5a5/b91c1c?text=Tomato', description_en: 'Farm-fresh tomatoes.', description_ur: 'کھیت کے تازہ ٹماٹر۔', stock: 80, top_selling: false },
            { id: 4, category: 'dairy-eggs', name_en: 'Milk (1 Litre)', name_ur: 'دودھ (1 لیٹر)', price: 180, image: 'https://placehold.co/300x300/e0f2fe/0ea5e9?text=Milk', description_en: 'Fresh pasteurized milk.', description_ur: 'تازہ پاسچرائزڈ دودھ۔', stock: 60, top_selling: true },
            { id: 5, category: 'dairy-eggs', name_en: 'Eggs (Dozen)', name_ur: 'انڈے (درجن)', price: 300, image: 'https://placehold.co/300x300/fef3c7/d97706?text=Eggs', description_en: 'Farm-fresh brown eggs.', description_ur: 'فارم کے تازہ بھورے انڈے۔', stock: 15, top_selling: true },
            { id: 6, category: 'dairy-eggs', name_en: 'Yogurt (500g)', name_ur: 'دہی (500 گرام)', price: 150, image: 'https://placehold.co/300x300/f3f4f6/6b7280?text=Yogurt', description_en: 'Plain, natural yogurt.', description_ur: 'سادہ، قدرتی دہی۔', stock: 40, top_selling: false },
            { id: 7, category: 'bakery', name_en: 'Bread (Large)', name_ur: 'ڈبل روٹی (بڑی)', price: 130, image: 'https://placehold.co/300x300/fde68a/b45309?text=Bread', description_en: 'Freshly baked sliced bread.', description_ur: 'تازہ پکی ہوئی سلائسڈ ڈبل روٹی۔', stock: 90, top_selling: true },
            { id: 8, category: 'beverages', name_en: 'Mineral Water (1.5L)', name_ur: 'منرل واٹر (1.5 لیٹر)', price: 80, image: 'https://placehold.co/300x300/bfdbfe/3b82f6?text=Water', description_en: 'Pure mineral water.', description_ur: 'خالص منرل واٹر۔', stock: 200, top_selling: false },
            { id: 9, category: 'snacks', name_en: 'Potato Chips (Large)', name_ur: 'آلو کے چپس (بڑا)', price: 100, image: 'https://placehold.co/300x300/fef9c3/f59e0b?text=Chips', description_en: 'Classic salted potato chips.', description_ur: 'کلاسک نمکین آلو کے چپس۔', stock: 8, top_selling: true },
            { id: 10, category: 'meat-fish', name_en: 'Chicken (1kg)', name_ur: 'چکن (1 کلو)', price: 750, image: 'https://placehold.co/300x300/fee2e2/ef4444?text=Chicken', description_en: 'Fresh skinless chicken.', description_ur: 'تازہ بغیر جلد کا چکن۔', stock: 30, top_selling: false },
        ];
        const defaultOrders = [
            { id: `AW-123456`, customer: 'Ahmed Khan', date: '2025-08-29', total: 1100, status: 'Processing' },
            { id: `AW-234567`, customer: 'Fatima Ali', date: '2025-08-28', total: 430, status: 'Shipped' },
            { id: `AW-345678`, customer: 'Zainab Bibi', date: '2025-08-29', total: 750, status: 'Delivered' },
            { id: `AW-456789`, customer: 'Usman Khalid', date: '2025-08-27', total: 180, status: 'Canceled' },
        ];
        if (!localStorage.getItem('ayatWholesaleProducts')) saveData('ayatWholesaleProducts', defaultProducts);
        if (!localStorage.getItem('ayatWholesaleCategories')) saveData('ayatWholesaleCategories', defaultCategories);
        if (!localStorage.getItem('ayatWholesaleOrders')) saveData('ayatWholesaleOrders', defaultOrders);
        function getProducts() { return loadData('ayatWholesaleProducts', []); }
        function getCategories() { return loadData('ayatWholesaleCategories', []); }
        function getOrders() { return loadData('ayatWholesaleOrders', []); }
        function saveProduct(productData) {
            let products = getProducts();
            if (productData.id) {
                const index = products.findIndex(p => p.id === productData.id);
                if (index > -1) products[index] = productData;
            } else {
                productData.id = Date.now();
                products.push(productData);
            }
            saveData('ayatWholesaleProducts', products);
        }
        function deleteProduct(productId) {
            let products = getProducts();
            products = products.filter(p => p.id !== productId);
            saveData('ayatWholesaleProducts', products);
        }
        function saveOrder(orderData) {
            let orders = getOrders();
            const index = orders.findIndex(o => o.id === orderData.id);
            if (index > -1) {
                orders[index] = orderData;
            } else {
                orders.push(orderData);
            }
            saveData('ayatWholesaleOrders', orders);
        }
    </script>
    
    <!-- Main Application Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const pages = document.querySelectorAll('main > section');
            const navLinks = document.querySelectorAll('nav a');
            const pageTitle = document.getElementById('page-title');
            const productModal = document.getElementById('product-modal');
            const addProductBtn = document.getElementById('add-product-btn');
            const cancelBtn = document.getElementById('cancel-btn');
            const productForm = document.getElementById('product-form');
            const modalTitle = document.getElementById('modal-title');
            const exportDbBtn = document.getElementById('export-db-btn');
            const importDbBtn = document.getElementById('import-db-btn');
            const importFileInput = document.getElementById('import-file-input');
            const statusColors = {
                'Processing': 'bg-yellow-200 text-yellow-800',
                'Shipped': 'bg-blue-200 text-blue-800',
                'Delivered': 'bg-green-200 text-green-800',
                'Canceled': 'bg-red-200 text-red-800',
            };

            const renderDashboard = () => {
                const products = getProducts();
                const orders = getOrders();
                const totalRevenue = orders.filter(o => o.status === 'Delivered').reduce((sum, o) => sum + o.total, 0);
                document.getElementById('total-revenue').textContent = `Rs. ${totalRevenue.toLocaleString()}`;
                document.getElementById('total-orders').textContent = orders.length;
                document.getElementById('total-products').textContent = products.length;
                document.getElementById('total-customers').textContent = new Set(orders.map(o => o.customer)).size;
                const recentOrders = orders.slice(-5).reverse();
                document.getElementById('recent-orders-table').innerHTML = `<table class="w-full text-left"><thead><tr><th class="p-2">Order ID</th><th class="p-2">Customer</th><th class="p-2">Status</th></tr></thead><tbody>${recentOrders.map(o => `<tr><td class="p-2 border-t">${o.id}</td><td class="p-2 border-t">${o.customer}</td><td class="p-2 border-t"><span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColors[o.status] || ''}">${o.status}</span></td></tr>`).join('')}</tbody></table>`;
                const lowStockProducts = products.filter(p => p.stock < 20);
                document.getElementById('low-stock-table').innerHTML = `<table class="w-full text-left"><thead><tr><th class="p-2">Product</th><th class="p-2">Stock Left</th></tr></thead><tbody>${lowStockProducts.map(p => `<tr><td class="p-2 border-t">${p.name_en}</td><td class="p-2 border-t"><span class="font-bold text-red-600">${p.stock}</span></td></tr>`).join('')}</tbody></table>`;
            };

            const renderProductsPage = () => {
                const products = getProducts();
                const categories = getCategories();
                document.getElementById('products-table-container').innerHTML = `<table class="w-full text-left"><thead><tr class="bg-gray-50"><th class="p-3">Product Name</th><th class="p-3">Category</th><th class="p-3">Price</th><th class="p-3">Stock</th><th class="p-3">Actions</th></tr></thead><tbody class="divide-y">${products.map(p => { const category = categories.find(c => c.id === p.category); return `<tr><td class="p-3">${p.name_en}</td><td class="p-3">${category ? category.name_en : 'N/A'}</td><td class="p-3">Rs. ${p.price}</td><td class="p-3">${p.stock}</td><td class="p-3"><button class="edit-product-btn text-blue-500 hover:text-blue-700 mr-3" data-id="${p.id}"><i class="fas fa-edit"></i></button><button class="delete-product-btn text-red-500 hover:text-red-700" data-id="${p.id}"><i class="fas fa-trash"></i></button></td></tr>`; }).join('')}</tbody></table>`;
            };

            const renderOrdersPage = () => {
                const orders = getOrders();
                document.getElementById('orders-table-container').innerHTML = `<table class="w-full text-left"><thead><tr class="bg-gray-50"><th class="p-3">Order ID</th><th class="p-3">Date</th><th class="p-3">Customer</th><th class="p-3">Total</th><th class="p-3">Status</th><th class="p-3">Actions</th></tr></thead><tbody class="divide-y">${orders.map(o => `<tr><td class="p-3 font-mono text-sm">${o.id}</td><td class="p-3">${o.date}</td><td class="p-3">${o.customer}</td><td class="p-3">Rs. ${o.total}</td><td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full ${statusColors[o.status] || ''}">${o.status}</span></td><td class="p-3"><select class="status-select bg-white border rounded p-1" data-id="${o.id}">${Object.keys(statusColors).map(status => `<option value="${status}" ${o.status === status ? 'selected' : ''}>${status}</option>`).join('')}</select></td></tr>`).join('')}</tbody></table>`;
            };

            const refreshAllPages = () => {
                const currentPage = Array.from(pages).find(p => !p.classList.contains('hidden'));
                renderDashboard();
                renderProductsPage();
                renderOrdersPage();
                showPage(currentPage ? currentPage.id : 'dashboard-page');
            };

            const showPage = (pageId) => {
                pages.forEach(page => page.classList.add('hidden'));
                document.getElementById(pageId).classList.remove('hidden');
                const title = pageId.split('-')[0];
                pageTitle.textContent = title.charAt(0).toUpperCase() + title.slice(1);
                navLinks.forEach(link => { link.classList.toggle('bg-gray-700', link.dataset.page === pageId); });
                if (pageId === 'dashboard-page') renderDashboard();
                if (pageId === 'products-page') renderProductsPage();
                if (pageId === 'orders-page') renderOrdersPage();
            };
            
            const openModal = (product = null) => {
                productForm.reset();
                const categories = getCategories();
                document.getElementById('category').innerHTML = categories.map(c => `<option value="${c.id}">${c.name_en}</option>`).join('');
                if (product) {
                    modalTitle.textContent = 'Edit Product';
                    document.getElementById('product-id').value = product.id;
                    document.getElementById('name_en').value = product.name_en;
                    document.getElementById('name_ur').value = product.name_ur;
                    document.getElementById('price').value = product.price;
                    document.getElementById('stock').value = product.stock;
                    document.getElementById('category').value = product.category;
                    document.getElementById('image').value = product.image;
                    document.getElementById('description_en').value = product.description_en;
                    document.getElementById('description_ur').value = product.description_ur;
                    document.getElementById('top_selling').checked = product.top_selling;
                } else {
                    modalTitle.textContent = 'Add New Product';
                    document.getElementById('product-id').value = '';
                }
                productModal.classList.remove('hidden');
            };

            const closeModal = () => {
                productModal.classList.add('hidden');
            };

            const exportDatabase = () => {
                const dbData = {
                    products: getProducts(),
                    categories: getCategories(),
                    orders: getOrders()
                };
                const dataStr = JSON.stringify(dbData, null, 2);
                const blob = new Blob([dataStr], {type: "application/json"});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ayat-wholesale-backup-${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                alert('Database exported successfully!');
            };
            
            const importDatabase = (event) => {
                const file = event.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        if (data.products && data.categories && data.orders) {
                            saveData('ayatWholesaleProducts', data.products);
                            saveData('ayatWholesaleCategories', data.categories);
                            saveData('ayatWholesaleOrders', data.orders);
                            alert('Database imported successfully! The page will now refresh.');
                            refreshAllPages();
                        } else {
                            alert('Invalid database file format.');
                        }
                    } catch (error) {
                        alert('Error reading or parsing the file.');
                        console.error("Import error:", error);
                    }
                };
                reader.readAsText(file);
            };
            
            navLinks.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); showPage(link.dataset.page); }));
            addProductBtn.addEventListener('click', () => openModal());
            cancelBtn.addEventListener('click', closeModal);
            exportDbBtn.addEventListener('click', exportDatabase);
            importDbBtn.addEventListener('click', () => importFileInput.click());
            importFileInput.addEventListener('change', importDatabase);

            productForm.addEventListener('submit', (e) => {
                e.preventDefault();
                saveProduct({
                    id: document.getElementById('product-id').value ? parseInt(document.getElementById('product-id').value) : null,
                    name_en: document.getElementById('name_en').value,
                    name_ur: document.getElementById('name_ur').value,
                    price: parseInt(document.getElementById('price').value),
                    stock: parseInt(document.getElementById('stock').value),
                    category: document.getElementById('category').value,
                    image: document.getElementById('image').value,
                    description_en: document.getElementById('description_en').value,
                    description_ur: document.getElementById('description_ur').value,
                    top_selling: document.getElementById('top_selling').checked,
                });
                closeModal();
                renderProductsPage();
            });
            
            document.body.addEventListener('click', (e) => {
                if(e.target.closest('.edit-product-btn')) {
                    openModal(getProducts().find(p => p.id === parseInt(e.target.closest('.edit-product-btn').dataset.id)));
                }
                if(e.target.closest('.delete-product-btn')) {
                    const productId = parseInt(e.target.closest('.delete-product-btn').dataset.id);
                    if(confirm('Are you sure you want to delete this product?')) {
                        deleteProduct(productId);
                        renderProductsPage();
                    }
                }
            });

            document.body.addEventListener('change', (e) => {
                if (e.target.classList.contains('status-select')) {
                    const orderId = e.target.dataset.id;
                    const newStatus = e.target.value;
                    const orders = getOrders();
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.status = newStatus;
                        saveOrder(order);
                        renderOrdersPage();
                    }
                }
            });

            showPage('dashboard-page');
        });
    </script>
</body>
</html>

